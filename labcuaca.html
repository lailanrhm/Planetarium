<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Cuaca Digital ¬∑ Hujan Interaktif</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Poppins', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #a3d0ff 0%, #c9e6ff 50%, #e6f3ff 100%);
            min-height: 100vh;
            color: #02457a;
            overflow-x: hidden;
            position: relative;
        }

        /* Latar awan animasi */
        .cloud-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 80% 20% 70% 30% / 40% 60% 40% 60%;
            filter: drop-shadow(0 10px 15px rgba(0, 60, 120, 0.2));
            animation: floatCloud 25s infinite alternate ease-in-out;
        }

        .cloud1 {
            width: 250px;
            height: 90px;
            top: 30px;
            left: 5%;
            animation-duration: 28s;
        }

        .cloud2 {
            width: 320px;
            height: 110px;
            bottom: 150px;
            right: 2%;
            animation-duration: 35s;
            opacity: 0.7;
        }

        .cloud3 {
            width: 200px;
            height: 70px;
            top: 200px;
            right: 20%;
            animation-duration: 22s;
            opacity: 0.6;
        }

        .cloud4 {
            width: 280px;
            height: 95px;
            bottom: 50px;
            left: 15%;
            animation-duration: 30s;
        }

        @keyframes floatCloud {
            0% {
                transform: translateX(0) translateY(0);
            }
            100% {
                transform: translateX(30px) translateY(20px);
            }
        }

        /* Hujan latar */
        .rain-bg {
            position: fixed;
            top: -10%;
            left: 0;
            width: 100%;
            height: 110%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.15;
        }

        .raindrop {
            position: absolute;
            width: 2px;
            height: 20px;
            background: linear-gradient(transparent, #3399ff, #66ccff);
            border-radius: 50%;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(110vh);
            }
        }

        /* Konten utama */
        .wrapper {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem 2rem 3rem;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #014d88, #2a7fc9, #5ca0d0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 3px 5px 15px rgba(255, 255, 255, 0.8);
            letter-spacing: -0.5px;
        }

        h1 i {
            color: #ffb347;
            -webkit-text-fill-color: initial;
            background: none;
            text-shadow: 0 0 20px #ffdd44;
        }

        .daily-fact-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-radius: 60px;
            border: 3px solid white;
            box-shadow: 0 15px 25px rgba(0, 70, 140, 0.25);
            font-weight: 600;
            font-size: 1.2rem;
            color: #02457a;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .daily-fact-card i {
            color: #ffaa33;
            font-size: 1.8rem;
            filter: drop-shadow(0 2px 5px gold);
        }

        /* Navigasi Timeline dengan ikon */
        .timeline {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(8px);
            padding: 1.2rem 1.8rem;
            border-radius: 70px;
            margin: 30px 0 40px;
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 15px 25px rgba(0, 50, 100, 0.15);
        }

        .timeline-btn {
            background: transparent;
            border: none;
            padding: 0.9rem 2rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.2rem;
            color: #014d88;
            transition: 0.3s;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(4px);
            border: 2px solid rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.05);
        }

        .timeline-btn i {
            font-size: 1.5rem;
            color: #0275d8;
            transition: 0.3s;
        }

        .timeline-btn.active {
            background: #0275d8;
            color: white;
            border-color: #ffd966;
            transform: scale(1.05);
            box-shadow: 0 10px 25px #6cb2ff;
        }

        .timeline-btn.active i {
            color: white;
        }

        /* Panel Materi dengan ikon */
        .materi-panel {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-radius: 60px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            border: 3px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 25px 40px rgba(0, 60, 120, 0.25);
        }

        .materi-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 2rem;
        }

        .materi-icon {
            font-size: 4rem;
            background: linear-gradient(135deg, #0275d8, #66ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 10px 15px rgba(0, 100, 200, 0.4));
        }

        .materi-header h2 {
            font-size: 2.4rem;
            color: #003b6f;
            border-left: 8px solid #ffc107;
            padding-left: 25px;
        }

        .materi-content {
            display: grid;
            grid-template-columns: 1.2fr 0.9fr;
            gap: 2.5rem;
            align-items: start;
        }

        .materi-desc {
            font-size: 1.2rem;
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.5);
            padding: 1.5rem;
            border-radius: 40px;
        }

        .materi-desc p {
            margin-bottom: 1rem;
        }

        .materi-desc ul {
            list-style: none;
            padding: 0;
        }

        .materi-desc li {
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .materi-desc li i {
            color: #0275d8;
            font-size: 1.3rem;
            width: 25px;
        }

        /* Ikon interaktif untuk setiap kategori */
        .interactive-icons {
            background: #d9efff;
            border-radius: 50px;
            padding: 2rem 1.5rem;
            text-align: center;
            box-shadow: inset 0 -5px 10px #b0d4f0, 0 15px 25px #9cc0e0;
        }

        .icon-grid {
            display: flex;
            justify-content: center;
            gap: 2.5rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .icon-item {
            cursor: pointer;
            transition: all 0.3s;
            filter: drop-shadow(0 10px 15px #78b9f0);
            text-align: center;
        }

        .icon-item:hover {
            transform: scale(1.15) rotate(5deg);
        }

        .icon-item i {
            font-size: 4.5rem;
        }

        .icon-item .fa-sun {
            color: #ffbb33;
            text-shadow: 0 0 25px #ffaa00;
        }

        .icon-item .fa-cloud {
            color: white;
            text-shadow: 0 5px 15px #3f8ab3;
        }

        .icon-item .fa-cloud-rain {
            color: #3e92cc;
        }

        .icon-item .fa-poo-storm {
            color: #5e4b3c;
        }

        .icon-item .fa-seedling {
            color: #2e7d32;
        }

        .icon-item .fa-house-flood-water {
            color: #0d47a1;
        }

        .icon-item .fa-globe {
            color: #42a5f5;
        }

        .icon-item .fa-rainbow {
            color: #ff99cc;
        }

        .icon-label {
            font-weight: 700;
            margin-top: 8px;
            background: rgba(255, 255, 255, 0.7);
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
        }

        .info-bubble {
            background: #02457a;
            color: white;
            padding: 1rem;
            border-radius: 50px;
            font-size: 1.1rem;
            margin-top: 1.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.9; }
            50% { opacity: 1; transform: scale(1.02); }
            100% { opacity: 0.9; }
        }

        /* Area Kuis Lengkap */
        .quiz-container {
            background: rgba(255, 248, 225, 0.9);
            backdrop-filter: blur(5px);
            border-radius: 60px;
            padding: 2rem;
            margin: 2rem 0;
            border: 3px solid #ffd966;
        }

        .quiz-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 2rem;
        }

        .quiz-header i {
            font-size: 3rem;
            color: #ffaa33;
        }

        .quiz-header h3 {
            font-size: 2rem;
            color: #003b6f;
        }

        .quiz-progress {
            width: 100%;
            height: 15px;
            background: #e0e0e0;
            border-radius: 30px;
            margin: 1.5rem 0;
            overflow: hidden;
        }

        .quiz-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0275d8, #66ccff);
            border-radius: 30px;
            transition: width 0.5s;
            width: 0%;
        }

        .quiz-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        #quizQuestion {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: #02457a;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .quiz-option-btn {
            background: white;
            border: 3px solid #0275d8;
            border-radius: 60px;
            padding: 1.2rem;
            font-size: 1.2rem;
            font-weight: 600;
            color: #02457a;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .quiz-option-btn:hover:not(:disabled) {
            background: #0275d8;
            color: white;
            transform: scale(1.02);
        }

        .quiz-option-btn.correct {
            background: #4caf50;
            border-color: #2e7d32;
            color: white;
        }

        .quiz-option-btn.wrong {
            background: #f44336;
            border-color: #c62828;
            color: white;
        }

        .quiz-option-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .quiz-feedback {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 1.5rem 0;
            padding: 1rem;
            border-radius: 50px;
            text-align: center;
        }

        .quiz-feedback.correct {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .quiz-feedback.wrong {
            background: #ffcdd2;
            color: #c62828;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .quiz-nav-btn {
            background: #ffb85b;
            border: none;
            border-radius: 50px;
            padding: 1rem 2.5rem;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 6px 0 #c57c1f;
            transition: 0.05s linear;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quiz-nav-btn:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        .quiz-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 6px 0 #c57c1f;
        }

        .quiz-score {
            font-size: 1.4rem;
            font-weight: 700;
            background: #02457a;
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 50px;
        }

        /* Mini Game */
        .game-area {
            background: #aad0f5;
            border-radius: 50px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 3px solid white;
        }

        #gameCanvas {
            background: #c7e5fc;
            border-radius: 40px;
            display: block;
            margin: 0 auto;
            width: 100%;
            max-width: 450px;
            height: auto;
            border: 4px solid white;
            cursor: pointer;
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.1);
        }

        .game-controls {
            display: flex;
            gap: 20px;
            margin: 15px 0;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            background: #f9f3d9;
            border: none;
            border-radius: 60px;
            padding: 0.8rem 2rem;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 6px 0 #ab8e5a;
            cursor: pointer;
            transition: 0.05s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        #gameMessage {
            font-size: 1.2rem;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.5);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
        }

        /* Audio kontrol */
        .audio-control {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: white;
            padding: 18px;
            border-radius: 60px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            z-index: 99;
            cursor: pointer;
            border: 3px solid #77b9ff;
            transition: 0.3s;
        }

        .audio-control:hover {
            transform: scale(1.1);
            background: #e6f3ff;
        }

        #audioBtn i {
            font-size: 2.2rem;
            color: #02457a;
        }

        .audio-status {
            position: fixed;
            bottom: 100px;
            right: 30px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 18px;
            border-radius: 40px;
            font-size: 0.9rem;
            z-index: 98;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .audio-status.show {
            opacity: 1;
        }

        /* Footer */
        footer {
            text-align: center;
            color: #014d88;
            font-weight: 600;
            margin-top: 60px;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 60px;
            backdrop-filter: blur(5px);
        }

        /* Responsif */
        @media (max-width: 900px) {
            .materi-content {
                grid-template-columns: 1fr;
            }

            .quiz-options {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 600px) {
            .wrapper {
                padding: 1rem;
            }

            .timeline-btn {
                padding: 0.7rem 1.2rem;
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <!-- Latar awan -->
    <div class="cloud-bg">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        <div class="cloud cloud3"></div>
        <div class="cloud cloud4"></div>
    </div>

    <!-- Latar hujan -->
    <div class="rain-bg" id="rainContainer"></div>

    <div class="wrapper">
        <!-- Header -->
        <header>
            <h1><i class="fas fa-cloud-sun-rain"></i> Lab Hujan Digital</h1>
            <div class="daily-fact-card" id="dailyFact">
                <i class="fas fa-star"></i>
                <span>Memuat fakta hujan...</span>
            </div>
        </header>

        <!-- Navigasi Timeline dengan Ikon -->
        <nav class="timeline" id="timelineNav">
            <button class="timeline-btn active" data-target="siklus">
                <i class="fas fa-water"></i> Siklus Air
            </button>
            <button class="timeline-btn" data-target="jenis">
                <i class="fas fa-cloud-showers-heavy"></i> Jenis Hujan
            </button>
            <button class="timeline-btn" data-target="dampak">
                <i class="fas fa-seedling"></i> Dampak Hujan
            </button>
            <button class="timeline-btn" data-target="faktaUnik">
                <i class="fas fa-globe-asia"></i> Fakta Unik
            </button>
        </nav>

        <!-- Panel Materi dengan Ikon Interaktif -->
        <div id="materiContainer" class="materi-panel">
            <!-- Akan diisi JavaScript -->
        </div>

        <!-- Kuis Lengkap -->
        <div class="quiz-container">
            <div class="quiz-header">
                <i class="fas fa-question-circle"></i>
                <h3>Kuis Lengkap Hujan</h3>
            </div>

            <div class="quiz-progress">
                <div class="quiz-progress-bar" id="quizProgressBar"></div>
            </div>

            <div class="quiz-stats">
                <span id="quizCurrent">Soal 1</span>
                <span id="quizScore">Skor: 0</span>
            </div>

            <div id="quizQuestion">Memuat soal...</div>

            <div class="quiz-options" id="quizOptions">
                <!-- Opsi akan diisi JS -->
            </div>

            <div id="quizFeedback" class="quiz-feedback"></div>

            <div class="quiz-navigation">
                <button class="quiz-nav-btn" id="prevQuizBtn">
                    <i class="fas fa-arrow-left"></i> Sebelumnya
                </button>
                <span class="quiz-score" id="totalScore">0/20</span>
                <button class="quiz-nav-btn" id="nextQuizBtn">
                    Selanjutnya <i class="fas fa-arrow-right"></i>
                </button>
            </div>

            <button class="quiz-nav-btn" id="resetQuizBtn" style="margin: 1rem auto; background: #ff6b6b;">
                <i class="fas fa-redo-alt"></i> Mulai Ulang Kuis
            </button>
        </div>

        <!-- Mini Game Catch the Drop -->
        <div class="game-area">
            <h3 style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
                <i class="fas fa-gamepad" style="font-size: 2rem;"></i>
                Catch the Drop - Tangkap Pengetahuan!
            </h3>
            <canvas id="gameCanvas" width="450" height="220"></canvas>
            <div class="game-controls">
                <span style="font-size: 1.4rem; font-weight: 700;">
                    Skor: <span id="scoreDisplay">0</span>
                </span>
                <button class="btn" id="restartGame">
                    <i class="fas fa-sync-alt"></i> Mulai Lagi
                </button>
            </div>
            <div id="gameMessage">Klik kiri/kanan canvas untuk geser ember!</div>
        </div>

        <footer>
            <i class="fas fa-cloud-rain"></i> Laboratorium Cuaca Digital ¬∑ Belajar Hujan jadi Seru!
            <i class="fas fa-rainbow"></i>
        </footer>
    </div>

    <!-- Kontrol Audio -->
    <div class="audio-control" id="audioBtn">
        <i class="fas fa-volume-up"></i>
    </div>
    <div class="audio-status" id="audioStatus">Audio hujan: ON</div>

    <script>
        (function() {
            // ---------- DATA MATERI & IKON INTERAKTIF ----------
            const materiData = {
                siklus: {
                    title: 'üåä Siklus Air - Proses Terjadinya Hujan',
                    icon: 'fa-water',
                    desc: 'Air di bumi mengalami siklus terus-menerus. Yuk, pelajari tahapannya!',
                    points: [
                        { icon: 'fa-sun', text: 'Evaporasi: Air menguap karena panas matahari' },
                        { icon: 'fa-cloud', text: 'Kondensasi: Uap air berubah menjadi awan' },
                        { icon: 'fa-cloud-rain', text: 'Presipitasi: Awan jenuh, turun hujan' },
                        { icon: 'fa-arrow-down', text: 'Air kembali ke laut/danau, siklus berulang' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-sun', label: 'Matahari', action: 'evaporasi' },
                        { icon: 'fa-cloud', label: 'Awan', action: 'kondensasi' },
                        { icon: 'fa-cloud-rain', label: 'Hujan', action: 'presipitasi' }
                    ]
                },
                jenis: {
                    title: '‚òÅÔ∏è Jenis-Jenis Hujan',
                    icon: 'fa-cloud-showers-heavy',
                    desc: 'Hujan datang dalam berbagai bentuk. Apa saja jenisnya?',
                    points: [
                        { icon: 'fa-cloud-rain', text: 'Hujan Gerimis: Tetesan halus, intensitas rendah' },
                        { icon: 'fa-cloud-showers-heavy', text: 'Hujan Deras: Tetesan besar, curah tinggi' },
                        { icon: 'fa-poo-storm', text: 'Hujan Badai: Disertai petir dan angin kencang' },
                        { icon: 'fa-mountain', text: 'Hujan Orografik: Terjadi di pegunungan' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-cloud-rain', label: 'Gerimis', action: 'gerimis' },
                        { icon: 'fa-cloud-showers-heavy', label: 'Deras', action: 'deras' },
                        { icon: 'fa-poo-storm', label: 'Badai', action: 'badai' },
                        { icon: 'fa-mountain', label: 'Orografik', action: 'orografik' }
                    ]
                },
                dampak: {
                    title: 'üå± Dampak Hujan bagi Kehidupan',
                    icon: 'fa-seedling',
                    desc: 'Hujan membawa berkah, tapi juga bisa jadi bencana.',
                    points: [
                        { icon: 'fa-seedling', text: 'Kesuburan Tanah: Menyuburkan tanaman' },
                        { icon: 'fa-tint', text: 'Sumber Air: Mengisi sungai dan danau' },
                        { icon: 'fa-broom', text: 'Membersihkan Polusi Udara' },
                        { icon: 'fa-house-flood-water', text: 'Banjir: Jika berlebihan dan drainase buruk' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-seedling', label: 'Subur', action: 'subur' },
                        { icon: 'fa-tint', label: 'Air', action: 'air' },
                        { icon: 'fa-broom', label: 'Bersih', action: 'bersih' },
                        { icon: 'fa-house-flood-water', label: 'Banjir', action: 'banjir' }
                    ]
                },
                faktaUnik: {
                    title: 'üåç Fakta Unik Hujan di Dunia',
                    icon: 'fa-globe-asia',
                    desc: 'Tahukah kamu? Hujan di berbagai tempat punya keunikan!',
                    points: [
                        { icon: 'fa-location-dot', text: 'Mawsynram, India: Tempat terbasah di dunia (12m/tahun)' },
                        { icon: 'fa-planet-ringed', text: 'Venus: Hujan asam sulfat, bukan air' },
                        { icon: 'fa-droplet', text: 'Petrichor: Bau khas setelah hujan' },
                        { icon: 'fa-rainbow', text: 'Pelangi: Terjadi karena pembiasan cahaya' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-location-dot', label: 'Mawsynram', action: 'mawsynram' },
                        { icon: 'fa-planet-ringed', label: 'Venus', action: 'venus' },
                        { icon: 'fa-droplet', label: 'Petrichor', action: 'petrichor' },
                        { icon: 'fa-rainbow', label: 'Pelangi', action: 'pelangi' }
                    ]
                }
            };

            // ---------- DATA KUIS LENGKAP (20 SOAL) ----------
            const quizData = [
                // Siklus Air (5 soal)
                { category: 'siklus', question: 'Apa nama proses air berubah menjadi uap?', options: ['Evaporasi', 'Kondensasi', 'Presipitasi', 'Transpirasi'], correct: 0 },
                { category: 'siklus', question: 'Proses perubahan uap air menjadi awan disebut?', options: ['Evaporasi', 'Kondensasi', 'Presipitasi', 'Sublimasi'], correct: 1 },
                { category: 'siklus', question: 'Tahap ketika air jatuh dari awan disebut?', options: ['Evaporasi', 'Kondensasi', 'Presipitasi', 'Infiltasi'], correct: 2 },
                { category: 'siklus', question: 'Apa yang menyebabkan air menguap?', options: ['Angin', 'Matahari', 'Bulan', 'Awan'], correct: 1 },
                { category: 'siklus', question: 'Setelah hujan, air akan kembali ke laut. Proses ini disebut?', options: ['Siklus hidrologi', 'Revolusi', 'Rotasi', 'Gravitasi'], correct: 0 },
                
                // Jenis Hujan (5 soal)
                { category: 'jenis', question: 'Hujan dengan tetesan sangat halus disebut?', options: ['Gerimis', 'Deras', 'Badai', 'Orografik'], correct: 0 },
                { category: 'jenis', question: 'Hujan yang disertai petir dan angin kencang?', options: ['Gerimis', 'Deras', 'Badai', 'Orografik'], correct: 2 },
                { category: 'jenis', question: 'Hujan yang terjadi karena udara dipaksa naik di pegunungan?', options: ['Konvektif', 'Orografik', 'Frontal', 'Muson'], correct: 1 },
                { category: 'jenis', question: 'Hujan dengan intensitas tinggi dan tiba-tiba disebut?', options: ['Gerimis', 'Hujan deras', 'Badai', 'Orografik'], correct: 1 },
                { category: 'jenis', question: 'Hujan frontal terjadi karena pertemuan massa udara?', options: ['Panas dan dingin', 'Basah dan kering', 'Asam dan basa', 'Tawar dan asin'], correct: 0 },
                
                // Dampak Hujan (5 soal)
                { category: 'dampak', question: 'Apa dampak positif hujan bagi tanah?', options: ['Menyuburkan', 'Mengeringkan', 'Mengeraskan', 'Mengasamkan'], correct: 0 },
                { category: 'dampak', question: 'Hujan berlebihan dapat menyebabkan?', options: ['Banjir', 'Kekeringan', 'Gempa', 'Tsunami'], correct: 0 },
                { category: 'dampak', question: 'Hujan membantu membersihkan?', options: ['Polusi udara', 'Sampah laut', 'Limbah pabrik', 'Asap kendaraan'], correct: 0 },
                { category: 'dampak', question: 'Apa yang diisi ulang oleh hujan?', options: ['Air tanah', 'Minyak bumi', 'Gas alam', 'Batubara'], correct: 0 },
                { category: 'dampak', question: 'Hujan asam disebabkan oleh?', options: ['Polusi udara', 'Matahari', 'Angin', 'Awan'], correct: 0 },
                
                // Fakta Unik (5 soal)
                { category: 'faktaUnik', question: 'Tempat terbasah di dunia adalah?', options: ['Mawsynram', 'Gurun Sahara', 'London', 'Jakarta'], correct: 0 },
                { category: 'faktaUnik', question: 'Bau khas setelah hujan disebut?', options: ['Petrichor', 'Aroma terapi', 'Parfum', 'Bau tanah'], correct: 0 },
                { category: 'faktaUnik', question: 'Planet apa yang mengalami hujan asam sulfat?', options: ['Venus', 'Mars', 'Jupiter', 'Saturnus'], correct: 0 },
                { category: 'faktaUnik', question: 'Pelangi terjadi karena?', options: ['Pembiasan cahaya', 'Hujan deras', 'Angin kencang', 'Petir'], correct: 0 },
                { category: 'faktaUnik', question: 'Kecepatan jatuh tetesan hujan sekitar?', options: ['8-30 km/jam', '100-200 km/jam', '1-5 km/jam', '50-80 km/jam'], correct: 0 }
            ];

            // ---------- STATE KUIS ----------
            let currentQuizIndex = 0;
            let userAnswers = new Array(quizData.length).fill(null);
            let quizScore = 0;
            let quizAnswered = false;

            // ---------- FUNGSI RENDER MATERI DENGAN IKON INTERAKTIF ----------
            function renderMateri(tabId) {
                const data = materiData[tabId];
                let html = `
                    <div class="materi-header">
                        <i class="fas ${data.icon} materi-icon"></i>
                        <h2>${data.title}</h2>
                    </div>
                    <div class="materi-content">
                        <div class="materi-desc">
                            <p>${data.desc}</p>
                            <ul>
                `;
                
                data.points.forEach(point => {
                    html += `<li><i class="fas ${point.icon}"></i> ${point.text}</li>`;
                });
                
                html += `
                            </ul>
                        </div>
                        <div class="interactive-icons">
                            <h4 style="margin-bottom: 1rem;"><i class="fas fa-hand-pointer"></i> Klik Ikon untuk Info!</h4>
                            <div class="icon-grid">
                `;
                
                data.interactiveIcons.forEach(icon => {
                    html += `
                        <div class="icon-item" data-action="${icon.action}">
                            <i class="fas ${icon.icon}"></i>
                            <div class="icon-label">${icon.label}</div>
                        </div>
                    `;
                });
                
                html += `
                            </div>
                            <div class="info-bubble" id="infoBubble">
                                ‚ú® Klik ikon untuk melihat penjelasan!
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('materiContainer').innerHTML = html;
                
                // Event listener untuk ikon interaktif
                document.querySelectorAll('.icon-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const action = this.dataset.action;
                        let message = '';
                        
                        switch(action) {
                            case 'evaporasi':
                                message = 'üî• Evaporasi: Air menguap karena panas matahari, berubah jadi uap air.';
                                break;
                            case 'kondensasi':
                                message = '‚òÅÔ∏è Kondensasi: Uap air naik, mendingin, dan berubah jadi awan.';
                                break;
                            case 'presipitasi':
                                message = 'üíß Presipitasi: Awan jenuh, air jatuh sebagai hujan.';
                                createRain(40);
                                break;
                            case 'gerimis':
                                message = 'üåßÔ∏è Gerimis: Diameter tetesan <0.5mm, intensitas rendah.';
                                break;
                            case 'deras':
                                message = 'üí¶ Hujan Deras: Intensitas tinggi >20mm/jam, tetesan besar.';
                                break;
                            case 'badai':
                                message = '‚õàÔ∏è Hujan Badai: Disertai petir, kilat, angin kencang.';
                                break;
                            case 'orografik':
                                message = 'üèîÔ∏è Hujan Orografik: Udara dipaksa naik oleh pegunungan.';
                                break;
                            case 'subur':
                                message = 'üå± Menyuburkan Tanah: Air hujan membawa mineral.';
                                break;
                            case 'air':
                                message = 'üíß Sumber Air: Mengisi sungai, danau, dan air tanah.';
                                break;
                            case 'bersih':
                                message = 'üßπ Membersihkan Polusi: Hujan mencuci polutan di udara.';
                                break;
                            case 'banjir':
                                message = 'üåä Banjir: Terjadi jika drainase buruk dan hujan lebat.';
                                break;
                            case 'mawsynram':
                                message = 'üáÆüá≥ Mawsynram, India: Rata-rata hujan 11.871mm/tahun!';
                                break;
                            case 'venus':
                                message = 'ü™ê Venus: Hujan asam sulfat, sangat panas dan beracun.';
                                break;
                            case 'petrichor':
                                message = 'üå∏ Petrichor: Bau khas setelah hujan dari minyak tumbuhan.';
                                break;
                            case 'pelangi':
                                message = 'üåà Pelangi: Terjadi karena pembiasan cahaya di tetesan air.';
                                break;
                            default:
                                message = '‚ú® Menarik, kan? Yuk lanjut eksplorasi!';
                        }
                        
                        document.getElementById('infoBubble').textContent = message;
                    });
                });
            }

            // ---------- FUNGSI RENDER KUIS ----------
            function renderQuiz() {
                const q = quizData[currentQuizIndex];
                document.getElementById('quizQuestion').textContent = q.question;
                
                let optionsHtml = '';
                q.options.forEach((opt, idx) => {
                    let btnClass = 'quiz-option-btn';
                    if (userAnswers[currentQuizIndex] !== null) {
                        if (idx === q.correct) {
                            btnClass += ' correct';
                        } else if (idx === userAnswers[currentQuizIndex] && idx !== q.correct) {
                            btnClass += ' wrong';
                        }
                    }
                    optionsHtml += `
                        <button class="${btnClass}" data-opt-index="${idx}" ${userAnswers[currentQuizIndex] !== null ? 'disabled' : ''}>
                            <i class="fas ${idx === 0 ? 'fa-a' : idx === 1 ? 'fa-b' : idx === 2 ? 'fa-c' : 'fa-d'}"></i>
                            ${opt}
                        </button>
                    `;
                });
                
                document.getElementById('quizOptions').innerHTML = optionsHtml;
                
                // Update progress
                const progress = ((currentQuizIndex + 1) / quizData.length) * 100;
                document.getElementById('quizProgressBar').style.width = progress + '%';
                document.getElementById('quizCurrent').textContent = `Soal ${currentQuizIndex + 1}/${quizData.length}`;
                
                // Hitung skor
                quizScore = userAnswers.reduce((acc, ans, idx) => {
                    return acc + (ans === quizData[idx].correct ? 1 : 0);
                }, 0);
                document.getElementById('quizScore').textContent = `Skor: ${quizScore}`;
                document.getElementById('totalScore').textContent = `${quizScore}/${quizData.length}`;
                
                // Feedback
                const feedbackEl = document.getElementById('quizFeedback');
                if (userAnswers[currentQuizIndex] !== null) {
                    if (userAnswers[currentQuizIndex] === q.correct) {
                        feedbackEl.textContent = '‚úÖ Benar! Hebat! +1 poin';
                        feedbackEl.className = 'quiz-feedback correct';
                    } else {
                        feedbackEl.textContent = `‚ùå Maaf, jawaban yang benar adalah: ${q.options[q.correct]}`;
                        feedbackEl.className = 'quiz-feedback wrong';
                    }
                } else {
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                }
                
                // Event listener untuk opsi kuis
                document.querySelectorAll('.quiz-option-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        if (userAnswers[currentQuizIndex] !== null) return;
                        
                        const selectedIdx = parseInt(this.dataset.optIndex);
                        userAnswers[currentQuizIndex] = selectedIdx;
                        renderQuiz();
                    });
                });
                
                // Update navigasi
                document.getElementById('prevQuizBtn').disabled = currentQuizIndex === 0;
                document.getElementById('nextQuizBtn').disabled = currentQuizIndex === quizData.length - 1;
            }

            // ---------- EVENT LISTENER KUIS ----------
            document.getElementById('prevQuizBtn').addEventListener('click', () => {
                if (currentQuizIndex > 0) {
                    currentQuizIndex--;
                    renderQuiz();
                }
            });
            
            document.getElementById('nextQuizBtn').addEventListener('click', () => {
                if (currentQuizIndex < quizData.length - 1) {
                    currentQuizIndex++;
                    renderQuiz();
                }
            });
            
            document.getElementById('resetQuizBtn').addEventListener('click', () => {
                userAnswers = new Array(quizData.length).fill(null);
                currentQuizIndex = 0;
                renderQuiz();
            });

            // ---------- NAVIGASI TIMELINE ----------
            const tabs = document.querySelectorAll('.timeline-btn');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderMateri(tab.dataset.target);
                });
            });

            // ---------- DAILY FACT ----------
            const dailyFacts = [
                "Hujan terderas di dunia: Mawsynram, India (12 meter/tahun)!",
                "Bau khas setelah hujan disebut 'petrichor'.",
                "Setetes hujan jatuh dengan kecepatan 8‚Äì30 km/jam.",
                "Planet Venus mengalami hujan asam sulfat.",
                "Pelangi terjadi karena pembiasan cahaya di tetesan hujan.",
                "Hujan es bisa sebesar bola golf!",
                "Di Mars tidak ada hujan, hanya debu.",
                "Hujan membantu menyebarkan biji tanaman.",
                "Suara hujan bisa membantu tidur lebih nyenyak.",
                "Hujan asam dapat merusak bangunan."
            ];
            
            function setDailyFact() {
                const today = new Date().getDate();
                const idx = today % dailyFacts.length;
                document.querySelector('#dailyFact span').innerText = dailyFacts[idx];
            }
            setDailyFact();

            // ---------- GAME CATCH THE DROP ----------
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            let gameScore = 0;
            let drops = [];
            let bucket = { x: 190, width: 70, y: 190, height: 25 };
            let gameInterval;
            let gameActive = true;

            const gameWords = [
                { text: 'H‚ÇÇO', value: 1 },
                { text: 'Evap', value: 1 },
                { text: 'Awan', value: 1 },
                { text: '3', value: 1 },
                { text: '7', value: 1 },
                { text: 'Curah', value: 1 },
                { text: 'Basah', value: 1 },
                { text: 'Siklus', value: 2 },
                { text: 'Hujan', value: 2 },
                { text: 'Air', value: 1 }
            ];

            function spawnDrop() {
                const word = gameWords[Math.floor(Math.random() * gameWords.length)];
                drops.push({
                    x: 30 + Math.random() * (canvas.width - 60),
                    y: 10,
                    speed: 1.2 + Math.random() * 2,
                    word: word.text,
                    value: word.value
                });
            }

            function drawGame() {
                if (!gameActive) return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Gambar ember
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(bucket.x, bucket.y, bucket.width, bucket.height);
                ctx.fillStyle = '#A0522D';
                ctx.fillRect(bucket.x - 5, bucket.y - 10, bucket.width + 10, 10);
                
                // Gambar tetesan
                drops.forEach((drop, index) => {
                    // Tetesan
                    ctx.fillStyle = '#1E90FF';
                    ctx.beginPath();
                    ctx.arc(drop.x, drop.y, 12, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // Teks
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 12px "Segoe UI"';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(drop.word, drop.x, drop.y);
                    
                    drop.y += drop.speed;
                    
                    // Cek tangkapan
                    if (drop.y > bucket.y - 15 && drop.y < bucket.y + bucket.height &&
                        drop.x > bucket.x && drop.x < bucket.x + bucket.width) {
                        gameScore += drop.value;
                        drops.splice(index, 1);
                        document.getElementById('scoreDisplay').innerText = gameScore;
                        document.getElementById('gameMessage').innerText = `üß∫ +${drop.value} poin!`;
                    } else if (drop.y > canvas.height) {
                        drops.splice(index, 1);
                    }
                });
            }

            function resetGame() {
                gameScore = 0;
                drops = [];
                document.getElementById('scoreDisplay').innerText = '0';
                document.getElementById('gameMessage').innerText = 'Klik kiri/kanan canvas untuk geser ember!';
                if (gameInterval) clearInterval(gameInterval);
                gameActive = true;
                gameInterval = setInterval(() => {
                    if (gameActive && drops.length < 8) {
                        spawnDrop();
                    }
                }, 700);
                requestAnimationFrame(function animate() {
                    if (!gameActive) return;
                    drawGame();
                    requestAnimationFrame(animate);
                });
            }

            // Kontrol ember
            canvas.addEventListener('click', (e) => {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                if (mouseX < bucket.x + bucket.width / 2) {
                    bucket.x = Math.max(0, bucket.x - 40);
                } else {
                    bucket.x = Math.min(canvas.width - bucket.width, bucket.x + 40);
                }
            });

            document.getElementById('restartGame').addEventListener('click', resetGame);

            // ---------- AUDIO ----------
            let audioElement;
            let audioPlaying = false;
            const audioStatus = document.getElementById('audioStatus');

            function initAudio() {
                if (audioElement) return;
                audioElement = new Audio();
                audioElement.loop = true;
                audioElement.volume = 0.2;
                
                const audioSources = [
                    'https://www.soundjay.com/nature/rain-01.mp3',
                    'https://actions.google.com/sounds/v1/weather/light_rain.ogg'
                ];
                
                audioElement.src = audioSources[0];
                audioElement.addEventListener('error', () => {
                    audioElement.src = audioSources[1];
                    audioElement.load();
                });
                audioElement.load();
            }

            function toggleAudio() {
                if (!audioElement) {
                    initAudio();
                    setTimeout(toggleAudio, 500);
                    return;
                }
                
                if (audioPlaying) {
                    audioElement.pause();
                    document.querySelector('#audioBtn i').className = 'fas fa-volume-mute';
                    audioStatus.textContent = 'Audio hujan: OFF';
                } else {
                    audioElement.play()
                        .then(() => {
                            document.querySelector('#audioBtn i').className = 'fas fa-volume-up';
                            audioStatus.textContent = 'Audio hujan: ON';
                        })
                        .catch(err => {
                            console.log('Audio play error:', err);
                            audioStatus.textContent = 'Klik izinkan audio';
                        });
                }
                audioPlaying = !audioPlaying;
                audioStatus.classList.add('show');
                setTimeout(() => audioStatus.classList.remove('show'), 2000);
            }

            document.getElementById('audioBtn').addEventListener('click', toggleAudio);
            window.addEventListener('load', initAudio);

            // ---------- HUJAN VISUAL ----------
            function createRain(density = 30) {
                const container = document.getElementById('rainContainer');
                container.innerHTML = '';
                for (let i = 0; i < density; i++) {
                    let drop = document.createElement('div');
                    drop.classList.add('raindrop');
                    drop.style.left = Math.random() * 100 + '%';
                    drop.style.animationDuration = 0.6 + Math.random() * 0.7 + 's';
                    drop.style.animationDelay = Math.random() * 2 + 's';
                    container.appendChild(drop);
                }
            }
            createRain(25);

            // Inisialisasi
            renderMateri('siklus');
            renderQuiz();
            resetGame();
        })();
    </script>
</body>
</html>