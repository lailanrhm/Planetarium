<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Geologi Digital ¬∑ Gunung & Gempa</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Poppins', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #2b3a4a 0%, #3e5a6f 50%, #1f2c38 100%);
            min-height: 100vh;
            color: #f0e9d8;
            overflow-x: hidden;
            position: relative;
        }

        /* Latar retakan tektonik */
        .tectonic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
            background-image: 
                radial-gradient(circle at 20% 30%, #b6854b 1px, transparent 1px),
                radial-gradient(circle at 80% 70%, #c28f5a 2px, transparent 2px),
                linear-gradient(45deg, transparent 65%, #7f5a3c 65%),
                linear-gradient(135deg, transparent 75%, #936e45 75%);
            background-size: 100px 100px, 150px 150px, 200px 200px, 250px 250px;
        }

        /* gempa garis putus-putus */
        .fault-line {
            position: fixed;
            top: 40%;
            left: 0;
            width: 100%;
            height: 5px;
            background: repeating-linear-gradient(90deg, #c7a252 0px, #c7a252 20px, transparent 20px, transparent 40px);
            opacity: 0.2;
            transform: rotate(-5deg);
            z-index: 0;
        }

        /* Konten utama */
        .wrapper {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem 2rem 3rem;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #f9d77e, #e3b37c, #d3945c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 3px 5px 15px rgba(0, 0, 0, 0.6);
            letter-spacing: -0.5px;
        }

        h1 i {
            color: #ff9933;
            -webkit-text-fill-color: initial;
            background: none;
            text-shadow: 0 0 20px #ffaa33;
        }

        .daily-fact-card {
            background: rgba(40, 30, 20, 0.85);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-radius: 60px;
            border: 3px solid #b87c4b;
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.5);
            font-weight: 600;
            font-size: 1.2rem;
            color: #ffde9e;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .daily-fact-card i {
            color: #ffaa33;
            font-size: 1.8rem;
            filter: drop-shadow(0 2px 5px #b45f1b);
        }

        /* Navigasi Timeline dengan ikon geologi */
        .timeline {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            background: rgba(30, 25, 20, 0.7);
            backdrop-filter: blur(8px);
            padding: 1.2rem 1.8rem;
            border-radius: 70px;
            margin: 30px 0 40px;
            border: 2px solid #bb8b5c;
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.4);
        }

        .timeline-btn {
            background: transparent;
            border: none;
            padding: 0.9rem 2rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.2rem;
            color: #f0dbb4;
            transition: 0.3s;
            cursor: pointer;
            background: rgba(70, 50, 35, 0.8);
            backdrop-filter: blur(4px);
            border: 2px solid #b5864b;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }

        .timeline-btn i {
            font-size: 1.5rem;
            color: #ffae6d;
            transition: 0.3s;
        }

        .timeline-btn.active {
            background: #c76d2b;
            color: white;
            border-color: #ffcf9a;
            transform: scale(1.05);
            box-shadow: 0 10px 25px #ad5314;
        }

        .timeline-btn.active i {
            color: white;
        }

        /* Panel Materi dengan ikon interaktif */
        .materi-panel {
            background: rgba(40, 35, 30, 0.85);
            backdrop-filter: blur(12px);
            border-radius: 60px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            border: 3px solid #b68b54;
            box-shadow: 0 25px 40px rgba(0, 0, 0, 0.5);
        }

        .materi-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 2rem;
        }

        .materi-icon {
            font-size: 4rem;
            background: linear-gradient(135deg, #ffb457, #ff7e2e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 10px 15px #a34405);
        }

        .materi-header h2 {
            font-size: 2.4rem;
            color: #ffd58c;
            border-left: 8px solid #ff9933;
            padding-left: 25px;
        }

        .materi-content {
            display: grid;
            grid-template-columns: 1.2fr 0.9fr;
            gap: 2.5rem;
            align-items: start;
        }

        .materi-desc {
            font-size: 1.2rem;
            line-height: 1.6;
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 40px;
            color: #efdbb5;
        }

        .materi-desc p {
            margin-bottom: 1rem;
        }

        .materi-desc ul {
            list-style: none;
            padding: 0;
        }

        .materi-desc li {
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .materi-desc li i {
            color: #ffae42;
            font-size: 1.3rem;
            width: 25px;
        }

        /* Ikon interaktif untuk setiap kategori */
        .interactive-icons {
            background: #4f3f2f;
            border-radius: 50px;
            padding: 2rem 1.5rem;
            text-align: center;
            box-shadow: inset 0 -5px 10px #2f241b, 0 15px 25px #1f1712;
        }

        .icon-grid {
            display: flex;
            justify-content: center;
            gap: 2.5rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .icon-item {
            cursor: pointer;
            transition: all 0.3s;
            filter: drop-shadow(0 10px 15px #442f1f);
            text-align: center;
        }

        .icon-item:hover {
            transform: scale(1.15) rotate(5deg);
        }

        .icon-item i {
            font-size: 4.5rem;
        }

        .icon-item .fa-mountain {
            color: #8f6b4c;
            text-shadow: 0 0 15px #b95b1a;
        }
        .icon-item .fa-volcano {
            color: #ff5722;
        }
        .icon-item .fa-house-crack {
            color: #b0a07c;
        }
        .icon-item .fa-trowel {
            color: #c69c6d;
        }
        .icon-item .fa-clock {
            color: #e6c8a0;
        }
        .icon-item .fa-water {
            color: #4f9ec9;
        }
        .icon-label {
            font-weight: 700;
            margin-top: 8px;
            background: rgba(30, 25, 20, 0.9);
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
            color: #efdbbe;
        }

        .info-bubble {
            background: #9b5f2e;
            color: white;
            padding: 1rem;
            border-radius: 50px;
            font-size: 1.1rem;
            margin-top: 1.5rem;
            animation: pulseGlow 2s infinite;
            border: 1px solid #e2ac6e;
        }

        @keyframes pulseGlow {
            0% { opacity: 0.9; box-shadow: 0 0 5px #ffa047; }
            50% { opacity: 1; box-shadow: 0 0 20px #ffae42; }
            100% { opacity: 0.9; box-shadow: 0 0 5px #c57020; }
        }

        /* Area Kuis Lengkap */
        .quiz-container {
            background: rgba(60, 50, 40, 0.95);
            backdrop-filter: blur(5px);
            border-radius: 60px;
            padding: 2rem;
            margin: 2rem 0;
            border: 3px solid #d1984d;
        }

        .quiz-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 2rem;
        }

        .quiz-header i {
            font-size: 3rem;
            color: #f0a64a;
        }

        .quiz-header h3 {
            font-size: 2rem;
            color: #ffcf8a;
        }

        .quiz-progress {
            width: 100%;
            height: 15px;
            background: #4d4033;
            border-radius: 30px;
            margin: 1.5rem 0;
            overflow: hidden;
        }

        .quiz-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #d9822b, #f0b56a);
            border-radius: 30px;
            transition: width 0.5s;
            width: 0%;
        }

        .quiz-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            font-weight: 600;
            color: #efd7b1;
        }

        #quizQuestion {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: #ffd9a3;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .quiz-option-btn {
            background: #6f5e4b;
            border: 3px solid #c8944e;
            border-radius: 60px;
            padding: 1.2rem;
            font-size: 1.2rem;
            font-weight: 600;
            color: #f8e4c1;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .quiz-option-btn:hover:not(:disabled) {
            background: #b87932;
            color: white;
            transform: scale(1.02);
        }

        .quiz-option-btn.correct {
            background: #3f7e4c;
            border-color: #8bc34a;
            color: white;
        }

        .quiz-option-btn.wrong {
            background: #a1422b;
            border-color: #c7623f;
            color: white;
        }

        .quiz-option-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .quiz-feedback {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 1.5rem 0;
            padding: 1rem;
            border-radius: 50px;
            text-align: center;
        }

        .quiz-feedback.correct {
            background: #386035;
            color: #d4ffb0;
        }

        .quiz-feedback.wrong {
            background: #713f2f;
            color: #ffd0a4;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .quiz-nav-btn {
            background: #c27d3d;
            border: none;
            border-radius: 50px;
            padding: 1rem 2.5rem;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 6px 0 #6d3e19;
            transition: 0.05s linear;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff0cf;
        }

        .quiz-nav-btn:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        .quiz-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 6px 0 #6d3e19;
        }

        .quiz-score {
            font-size: 1.4rem;
            font-weight: 700;
            background: #422f1e;
            color: #ffc489;
            padding: 0.8rem 2rem;
            border-radius: 50px;
        }

        /* Mini Game - Tangkap Lempeng */
        .game-area {
            background: #52412f;
            border-radius: 50px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 3px solid #c49353;
        }

        #gameCanvas {
            background: #7c6853;
            border-radius: 40px;
            display: block;
            margin: 0 auto;
            width: 100%;
            max-width: 450px;
            height: auto;
            border: 4px solid #b48747;
            cursor: pointer;
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.5);
        }

        .game-controls {
            display: flex;
            gap: 20px;
            margin: 15px 0;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            background: #edc28b;
            border: none;
            border-radius: 60px;
            padding: 0.8rem 2rem;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 6px 0 #8b5a2c;
            cursor: pointer;
            transition: 0.05s;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #3e2d1b;
        }

        .btn:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        #gameMessage {
            font-size: 1.2rem;
            font-weight: 600;
            background: rgba(40, 35, 30, 0.9);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            color: #f1d5a3;
        }

        /* Audio kontrol */
        .audio-control {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: #af7642;
            padding: 18px;
            border-radius: 60px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            z-index: 99;
            cursor: pointer;
            border: 3px solid #f3ba7a;
            transition: 0.3s;
        }

        .audio-control:hover {
            transform: scale(1.1);
            background: #cb8f4d;
        }

        #audioBtn i {
            font-size: 2.2rem;
            color: #fff3d1;
        }

        .audio-status {
            position: fixed;
            bottom: 100px;
            right: 30px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 18px;
            border-radius: 40px;
            font-size: 0.9rem;
            z-index: 98;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .audio-status.show {
            opacity: 1;
        }

        /* Footer */
        footer {
            text-align: center;
            color: #c9b28b;
            font-weight: 600;
            margin-top: 60px;
            padding: 1.5rem;
            background: rgba(30, 25, 20, 0.6);
            border-radius: 60px;
            backdrop-filter: blur(5px);
        }

        /* Responsif */
        @media (max-width: 900px) {
            .materi-content {
                grid-template-columns: 1fr;
            }

            .quiz-options {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 600px) {
            .wrapper {
                padding: 1rem;
            }

            .timeline-btn {
                padding: 0.7rem 1.2rem;
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <!-- Latar geologi: retakan dan patahan -->
    <div class="tectonic-bg"></div>
    <div class="fault-line"></div>

    <div class="wrapper">
        <!-- Header -->
        <header>
            <h1><i class="fas fa-volcano"></i> Lab Geologi Digital</h1>
            <div class="daily-fact-card" id="dailyFact">
                <i class="fas fa-star"></i>
                <span>Memuat fakta geologi...</span>
            </div>
        </header>

        <!-- Navigasi Timeline dengan Ikon Geologi -->
        <nav class="timeline" id="timelineNav">
            <button class="timeline-btn active" data-target="struktur">
                <i class="fas fa-layer-group"></i> Struktur Bumi
            </button>
            <button class="timeline-btn" data-target="vulkanisme">
                <i class="fas fa-fire"></i> Vulkanisme
            </button>
            <button class="timeline-btn" data-target="gempa">
                <i class="fas fa-house-crack"></i> Gempa Bumi
            </button>
            <button class="timeline-btn" data-target="faktaUnik">
                <i class="fas fa-globe-asia"></i> Fakta Unik
            </button>
        </nav>

        <!-- Panel Materi dengan Ikon Interaktif -->
        <div id="materiContainer" class="materi-panel">
            <!-- Akan diisi JavaScript -->
        </div>

        <!-- Kuis Lengkap Geologi -->
        <div class="quiz-container">
            <div class="quiz-header">
                <i class="fas fa-question-circle"></i>
                <h3>Kuis Ahli Geologi</h3>
            </div>

            <div class="quiz-progress">
                <div class="quiz-progress-bar" id="quizProgressBar"></div>
            </div>

            <div class="quiz-stats">
                <span id="quizCurrent">Soal 1</span>
                <span id="quizScore">Skor: 0</span>
            </div>

            <div id="quizQuestion">Memuat soal...</div>

            <div class="quiz-options" id="quizOptions">
                <!-- Opsi akan diisi JS -->
            </div>

            <div id="quizFeedback" class="quiz-feedback"></div>

            <div class="quiz-navigation">
                <button class="quiz-nav-btn" id="prevQuizBtn">
                    <i class="fas fa-arrow-left"></i> Sebelumnya
                </button>
                <span class="quiz-score" id="totalScore">0/20</span>
                <button class="quiz-nav-btn" id="nextQuizBtn">
                    Selanjutnya <i class="fas fa-arrow-right"></i>
                </button>
            </div>

            <button class="quiz-nav-btn" id="resetQuizBtn" style="margin: 1rem auto; background: #c75b37;">
                <i class="fas fa-redo-alt"></i> Mulai Ulang Kuis
            </button>
        </div>

        <!-- Mini Game Tangkap Lempeng (Plate Tectonics) -->
        <div class="game-area">
            <h3 style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem; color:#efd7b1;">
                <i class="fas fa-puzzle-piece" style="font-size: 2rem;"></i>
                Tangkap Lempeng Tektonik
            </h3>
            <canvas id="gameCanvas" width="450" height="220"></canvas>
            <div class="game-controls">
                <span style="font-size: 1.4rem; font-weight: 700; color:#ffdcaa;">
                    Skor: <span id="scoreDisplay">0</span>
                </span>
                <button class="btn" id="restartGame">
                    <i class="fas fa-sync-alt"></i> Mulai Lagi
                </button>
            </div>
            <div id="gameMessage">Klik kiri/kanan canvas untuk geser alat detektor!</div>
        </div>

        <footer>
            <i class="fas fa-mountain"></i> Laboratorium Geologi Digital ¬∑ Selidiki Bumi! 
            <i class="fas fa-gem"></i>
        </footer>
    </div>

    <!-- Kontrol Audio (gemuruh) -->
    <div class="audio-control" id="audioBtn">
        <i class="fas fa-volume-up"></i>
    </div>
    <div class="audio-status" id="audioStatus">Audio gemuruh: ON</div>

    <script>
        (function() {
            // ---------- DATA MATERI & IKON INTERAKTIF (GEOLOGI) ----------
            const materiData = {
                struktur: {
                    title: 'üåç Struktur Bumi - Lapisan Bumi',
                    icon: 'fa-layer-group',
                    desc: 'Bumi terdiri dari beberapa lapisan. Yuk, kenali dari kerak hingga inti!',
                    points: [
                        { icon: 'fa-mountain', text: 'Kerak: Lapisan terluar tipal, tempat kita hidup (5‚Äì70 km).' },
                        { icon: 'fa-fire', text: 'Mantel: Lapisan tebal batuan panas, tempat magma berasal.' },
                        { icon: 'fa-water', text: 'Inti Luar: Besi cair, menciptakan medan magnet bumi.' },
                        { icon: 'fa-circle', text: 'Inti Dalam: Bola besi padat, suhu 5.400¬∞C.' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-mountain', label: 'Kerak', action: 'kerak' },
                        { icon: 'fa-fire', label: 'Mantel', action: 'mantel' },
                        { icon: 'fa-water', label: 'Inti Luar', action: 'outer' },
                        { icon: 'fa-circle', label: 'Inti Dalam', action: 'inner' }
                    ]
                },
                vulkanisme: {
                    title: 'üåã Vulkanisme - Proses Letusan Gunung',
                    icon: 'fa-volcano',
                    desc: 'Bagaimana gunung api meletus? Simak tahapannya!',
                    points: [
                        { icon: 'fa-trowel', text: 'Magma naik dari mantel melalui rekahan.' },
                        { icon: 'fa-fire', text: 'Tekanan gas terdorong ke permukaan.' },
                        { icon: 'fa-cloud', text: 'Letusan: abu, lava, dan gas vulkanik.' },
                        { icon: 'fa-mountain', text: 'Lava mendingin membentuk batuan beku.' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-trowel', label: 'Magma', action: 'magma' },
                        { icon: 'fa-fire', label: 'Tekanan', action: 'tekanan' },
                        { icon: 'fa-cloud', label: 'Letusan', action: 'erupsi' },
                        { icon: 'fa-gem', label: 'Batuan', action: 'batuan' }
                    ]
                },
                gempa: {
                    title: 'üí¢ Gempa Bumi - Getaran Lempeng',
                    icon: 'fa-house-crack',
                    desc: 'Gempa terjadi akibat pergerakan lempeng tektonik.',
                    points: [
                        { icon: 'fa-arrows-left-right', text: 'Lempeng saling bergesekan / bertabrakan.' },
                        { icon: 'fa-bolt', text: 'Energi dilepaskan sebagai gelombang seismik.' },
                        { icon: 'fa-chart-line', text: 'Episentrum: titik di permukaan, hiposentrum: di kedalaman.' },
                        { icon: 'fa-house-flood-water', text: 'Dampak: retakan tanah, tsunami, likuefaksi.' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-arrows-left-right', label: 'Pergeseran', action: 'geser' },
                        { icon: 'fa-bolt', label: 'Gelombang', action: 'gelombang' },
                        { icon: 'fa-chart-line', label: 'Seismograf', action: 'seismograf' },
                        { icon: 'fa-house-crack', label: 'Rusak', action: 'rusak' }
                    ]
                },
                faktaUnik: {
                    title: 'üåü Fakta Unik Geologi Dunia',
                    icon: 'fa-globe-asia',
                    desc: 'Tahukah kamu? Bumi menyimpan banyak keunikan!',
                    points: [
                        { icon: 'fa-clock', text: 'Superbenua Pangea terbentuk 335 juta tahun lalu.' },
                        { icon: 'fa-droplet', text: 'Danau lava aktif: Nyiragongo (Kongo).' },
                        { icon: 'fa-mountain', text: 'Gunung Everest masih naik ~5mm/tahun.' },
                        { icon: 'fa-water', text: 'Tsunami tertinggi 524m di Alaska (1958).' }
                    ],
                    interactiveIcons: [
                        { icon: 'fa-clock', label: 'Pangea', action: 'pangea' },
                        { icon: 'fa-droplet', label: 'Lava', action: 'lava' },
                        { icon: 'fa-mountain', label: 'Everest', action: 'everest' },
                        { icon: 'fa-water', label: 'Tsunami', action: 'tsunami' }
                    ]
                }
            };

            // ---------- DATA KUIS LENGKAP (20 SOAL) ----------
            const quizData = [
                // Struktur Bumi (5 soal)
                { category: 'struktur', question: 'Apa nama lapisan terluar bumi?', options: ['Kerak', 'Mantel', 'Inti luar', 'Inti dalam'], correct: 0 },
                { category: 'struktur', question: 'Lapisan bumi tempat magma berada?', options: ['Kerak', 'Mantel', 'Inti luar', 'Inti dalam'], correct: 1 },
                { category: 'struktur', question: 'Inti luar bumi sebagian besar tersusun atas?', options: ['Besi cair', 'Batu granit', 'Emas', 'Air'], correct: 0 },
                { category: 'struktur', question: 'Berapa perkiraan suhu inti dalam?', options: ['100¬∞C', '1000¬∞C', '5400¬∞C', '10.000¬∞C'], correct: 2 },
                { category: 'struktur', question: 'Lapisan mana yang menciptakan medan magnet bumi?', options: ['Kerak', 'Mantel', 'Inti luar', 'Inti dalam'], correct: 2 },
                
                // Vulkanisme (5 soal)
                { category: 'vulkanisme', question: 'Magma yang keluar ke permukaan disebut?', options: ['Lava', 'Abu', 'Gas', 'Batuan'], correct: 0 },
                { category: 'vulkanisme', question: 'Gunung api yang tidak tercatat meletus disebut?', options: ['Aktif', 'Tidak aktif', 'Mati', 'Abu'], correct: 1 },
                { category: 'vulkanisme', question: 'Bahan piroklastik berupa butiran kecil?', options: ['Abu vulkanik', 'Lava', 'Bom', 'Lapili'], correct: 0 },
                { category: 'vulkanisme', question: 'Gunung api tertinggi di Indonesia?', options: ['Kerinci', 'Semeru', 'Rinjani', 'Merapi'], correct: 1 },
                { category: 'vulkanisme', question: 'Dampak positif letusan gunung api?', options: ['Tanah subur', 'Hujan abu', 'Lahar dingin', 'Gas beracun'], correct: 0 },
                
                // Gempa (5 soal)
                { category: 'gempa', question: 'Titik pusat gempa di permukaan bumi?', options: ['Episentrum', 'Hiposentrum', 'Seismograf', 'Tsunami'], correct: 0 },
                { category: 'gempa', question: 'Alat pencatat gempa?', options: ['Seismograf', 'Barometer', 'Termometer', 'Hidrometer'], correct: 0 },
                { category: 'gempa', question: 'Gempa akibat pergeseran lempeng?', options: ['Tektonik', 'Vulkanik', 'Runtuhan', 'Buatan'], correct: 0 },
                { category: 'gempa', question: 'Skala untuk mengukur kekuatan gempa?', options: ['Richter', 'Celsius', 'Fahrenheit', 'Beaufort'], correct: 0 },
                { category: 'gempa', question: 'Gelombang gempa yang pertama tercatat?', options: ['Primer (P)', 'Sekunder (S)', 'Permukaan', 'Tsunami'], correct: 0 },
                
                // Fakta Unik (5 soal)
                { category: 'faktaUnik', question: 'Superbenua purba bernama?', options: ['Pangea', 'Gondwana', 'Laurasia', 'Rodinia'], correct: 0 },
                { category: 'faktaUnik', question: 'Danau lava aktif terkenal di Afrika?', options: ['Nyiragongo', 'Victoria', 'Tanganyika', 'Chad'], correct: 0 },
                { category: 'faktaUnik', question: 'Gunung Everest naik sekitar berapa mm/tahun?', options: ['5 mm', '50 mm', '1 m', '10 cm'], correct: 0 },
                { category: 'faktaUnik', question: 'Tahun 1815 letusan gunung dahsyat di Indonesia?', options: ['Tambora', 'Krakatau', 'Merapi', 'Toba'], correct: 0 },
                { category: 'faktaUnik', question: 'Palung terdalam di dunia?', options: ['Mariana', 'Sunda', 'Filipina', 'Peru-Chile'], correct: 0 }
            ];

            // ---------- STATE KUIS ----------
            let currentQuizIndex = 0;
            let userAnswers = new Array(quizData.length).fill(null);
            let quizScore = 0;

            // ---------- FUNGSI RENDER MATERI DENGAN IKON INTERAKTIF ----------
            function renderMateri(tabId) {
                const data = materiData[tabId];
                let html = `
                    <div class="materi-header">
                        <i class="fas ${data.icon} materi-icon"></i>
                        <h2>${data.title}</h2>
                    </div>
                    <div class="materi-content">
                        <div class="materi-desc">
                            <p>${data.desc}</p>
                            <ul>
                `;
                
                data.points.forEach(point => {
                    html += `<li><i class="fas ${point.icon}"></i> ${point.text}</li>`;
                });
                
                html += `
                            </ul>
                        </div>
                        <div class="interactive-icons">
                            <h4 style="margin-bottom: 1rem; color: #f0dbb4;"><i class="fas fa-hand-pointer"></i> Klik Ikon untuk Info!</h4>
                            <div class="icon-grid">
                `;
                
                data.interactiveIcons.forEach(icon => {
                    html += `
                        <div class="icon-item" data-action="${icon.action}">
                            <i class="fas ${icon.icon}"></i>
                            <div class="icon-label">${icon.label}</div>
                        </div>
                    `;
                });
                
                html += `
                            </div>
                            <div class="info-bubble" id="infoBubble">
                                ‚ú® Klik ikon untuk mempelajari lebih dalam!
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('materiContainer').innerHTML = html;
                
                // Event listener untuk ikon interaktif
                document.querySelectorAll('.icon-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const action = this.dataset.action;
                        let message = '';
                        
                        switch(action) {
                            case 'kerak':
                                message = 'üåé Kerak: Tebal 5‚Äì70 km, terbagi menjadi kerak samudra dan benua.';
                                break;
                            case 'mantel':
                                message = 'üî• Mantel: 84% volume bumi, batuan padat panas yang dapat mengalir.';
                                break;
                            case 'outer':
                                message = 'üåä Inti luar: Besi-nikel cair, tebal 2.200 km, menghasilkan medan magnet.';
                                break;
                            case 'inner':
                                message = '‚≠ê Inti dalam: Bola besi padat seukuran bulan, suhu 5.400¬∞C.';
                                break;
                            case 'magma':
                                message = 'ü™® Magma: Batuan cair di dalam mantel, mengandung gas dan kristal.';
                                break;
                            case 'tekanan':
                                message = 'üí¢ Tekanan gas mendorong magma naik ke permukaan.';
                                break;
                            case 'erupsi':
                                message = 'üåã Letusan: Magma keluar sebagai lava, abu, dan piroklastik.';
                                createRain(30); // efek visual abu (dimanfaatkan dari fungsi hujan)
                                break;
                            case 'batuan':
                                message = 'ü™® Batuan beku: hasil pendinginan lava, contoh: basal, andesit.';
                                break;
                            case 'geser':
                                message = '‚ÜîÔ∏è Pergerakan lempeng: konvergen, divergen, transform.';
                                break;
                            case 'gelombang':
                                message = 'üìâ Gelombang seismik: P (primer) dan S (sekunder).';
                                break;
                            case 'seismograf':
                                message = 'üìä Seismograf merekam getaran gempa. Semakin besar, amplitudo tinggi.';
                                break;
                            case 'rusak':
                                message = 'üèöÔ∏è Dampak gempa: retakan, likuefaksi, longsor, tsunami.';
                                break;
                            case 'pangea':
                                message = 'üåê Pangea: superbenua yang terpecah 200 juta tahun lalu.';
                                break;
                            case 'lava':
                                message = 'üíß Danau lava Nyiragongo di Kongo, salah satu yang terbesar di dunia.';
                                break;
                            case 'everest':
                                message = 'üèîÔ∏è Everest terus naik karena tabrakan lempeng India-Eurasia.';
                                break;
                            case 'tsunami':
                                message = 'üåä Teluk Lituya, Alaska 1958: tsunami 524m akibat longsor.';
                                break;
                            default:
                                message = 'üîç Eksplorasi lebih jauh! Bumi penuh misteri.';
                        }
                        
                        document.getElementById('infoBubble').textContent = message;
                    });
                });
            }

            // ---------- FUNGSI RENDER KUIS ----------
            function renderQuiz() {
                const q = quizData[currentQuizIndex];
                document.getElementById('quizQuestion').textContent = q.question;
                
                let optionsHtml = '';
                q.options.forEach((opt, idx) => {
                    let btnClass = 'quiz-option-btn';
                    if (userAnswers[currentQuizIndex] !== null) {
                        if (idx === q.correct) {
                            btnClass += ' correct';
                        } else if (idx === userAnswers[currentQuizIndex] && idx !== q.correct) {
                            btnClass += ' wrong';
                        }
                    }
                    optionsHtml += `
                        <button class="${btnClass}" data-opt-index="${idx}" ${userAnswers[currentQuizIndex] !== null ? 'disabled' : ''}>
                            <i class="fas ${idx === 0 ? 'fa-a' : idx === 1 ? 'fa-b' : idx === 2 ? 'fa-c' : 'fa-d'}"></i>
                            ${opt}
                        </button>
                    `;
                });
                
                document.getElementById('quizOptions').innerHTML = optionsHtml;
                
                // Update progress
                const progress = ((currentQuizIndex + 1) / quizData.length) * 100;
                document.getElementById('quizProgressBar').style.width = progress + '%';
                document.getElementById('quizCurrent').textContent = `Soal ${currentQuizIndex + 1}/${quizData.length}`;
                
                // Hitung skor
                quizScore = userAnswers.reduce((acc, ans, idx) => {
                    return acc + (ans === quizData[idx].correct ? 1 : 0);
                }, 0);
                document.getElementById('quizScore').textContent = `Skor: ${quizScore}`;
                document.getElementById('totalScore').textContent = `${quizScore}/${quizData.length}`;
                
                // Feedback
                const feedbackEl = document.getElementById('quizFeedback');
                if (userAnswers[currentQuizIndex] !== null) {
                    if (userAnswers[currentQuizIndex] === q.correct) {
                        feedbackEl.textContent = '‚úÖ Benar! Hebat! +1 poin';
                        feedbackEl.className = 'quiz-feedback correct';
                    } else {
                        feedbackEl.textContent = `‚ùå Jawaban benar: ${q.options[q.correct]}`;
                        feedbackEl.className = 'quiz-feedback wrong';
                    }
                } else {
                    feedbackEl.textContent = '';
                    feedbackEl.className = 'quiz-feedback';
                }
                
                // Event listener untuk opsi kuis
                document.querySelectorAll('.quiz-option-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        if (userAnswers[currentQuizIndex] !== null) return;
                        
                        const selectedIdx = parseInt(this.dataset.optIndex);
                        userAnswers[currentQuizIndex] = selectedIdx;
                        renderQuiz();
                    });
                });
                
                // Update navigasi
                document.getElementById('prevQuizBtn').disabled = currentQuizIndex === 0;
                document.getElementById('nextQuizBtn').disabled = currentQuizIndex === quizData.length - 1;
            }

            // ---------- EVENT LISTENER KUIS ----------
            document.getElementById('prevQuizBtn').addEventListener('click', () => {
                if (currentQuizIndex > 0) {
                    currentQuizIndex--;
                    renderQuiz();
                }
            });
            
            document.getElementById('nextQuizBtn').addEventListener('click', () => {
                if (currentQuizIndex < quizData.length - 1) {
                    currentQuizIndex++;
                    renderQuiz();
                }
            });
            
            document.getElementById('resetQuizBtn').addEventListener('click', () => {
                userAnswers = new Array(quizData.length).fill(null);
                currentQuizIndex = 0;
                renderQuiz();
            });

            // ---------- NAVIGASI TIMELINE ----------
            const tabs = document.querySelectorAll('.timeline-btn');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderMateri(tab.dataset.target);
                });
            });

            // ---------- DAILY FACT GEOLOGI ----------
            const dailyFacts = [
                "Gunung Tambora (1815) menyebabkan 'tahun tanpa musim panas'!",
                "Palung Mariana sedalam 11 km, titik terdalam bumi.",
                "Batu tertua di bumi berusia 4,4 miliar tahun.",
                "Setiap tahun, sekitar 500.000 gempa terdeteksi.",
                "Letusan Krakatau 1883 terdengar hingga Australia.",
                "Lempeng tektonik bergerak secepat pertumbuhan kuku.",
                "Kilat sering muncul saat letusan gunung api.",
                "Fosil tertua adalah stromatolit (3,5 miliar tahun).",
                "Inti bumi berputar sedikit lebih cepat dari kerak.",
                "Gunung Mauna Kea lebih tinggi dari Everest jika diukur dari dasar laut."
            ];
            
            function setDailyFact() {
                const today = new Date().getDate();
                const idx = today % dailyFacts.length;
                document.querySelector('#dailyFact span').innerText = dailyFacts[idx];
            }
            setDailyFact();

            // ---------- GAME TANGKAP LEMPENG ----------
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            let gameScore = 0;
            let plates = [];
            let catcher = { x: 170, width: 80, y: 190, height: 25 };
            let gameInterval;
            let gameActive = true;

            const plateWords = [
                { text: 'Lempeng', value: 1 },
                { text: 'Pangea', value: 2 },
                { text: 'Magma', value: 1 },
                { text: 'Patahan', value: 1 },
                { text: 'Kerak', value: 1 },
                { text: 'Mantel', value: 2 },
                { text: 'Gempa', value: 2 },
                { text: 'Tsunami', value: 3 }
            ];

            function spawnPlate() {
                const word = plateWords[Math.floor(Math.random() * plateWords.length)];
                plates.push({
                    x: 20 + Math.random() * (canvas.width - 60),
                    y: 10,
                    speed: 1.0 + Math.random() * 2,
                    word: word.text,
                    value: word.value
                });
            }

            function drawGame() {
                if (!gameActive) return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Gambar detektor (alat seismik)
                ctx.fillStyle = '#CD853F';
                ctx.fillRect(catcher.x, catcher.y, catcher.width, catcher.height);
                ctx.fillStyle = '#8B5A2B';
                ctx.fillRect(catcher.x - 5, catcher.y - 12, catcher.width + 10, 12);
                
                // Gambar lempeng
                plates.forEach((plate, index) => {
                    // bentuk lempeng persegi
                    ctx.fillStyle = '#A0522D';
                    ctx.beginPath();
                    ctx.rect(plate.x - 18, plate.y - 12, 36, 24);
                    ctx.fill();
                    ctx.strokeStyle = '#FFD39B';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // Teks
                    ctx.fillStyle = '#FFE4C4';
                    ctx.font = 'bold 12px "Segoe UI"';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(plate.word, plate.x, plate.y);
                    
                    plate.y += plate.speed;
                    
                    // Cek tangkapan
                    if (plate.y > catcher.y - 15 && plate.y < catcher.y + catcher.height &&
                        plate.x > catcher.x && plate.x < catcher.x + catcher.width) {
                        gameScore += plate.value;
                        plates.splice(index, 1);
                        document.getElementById('scoreDisplay').innerText = gameScore;
                        document.getElementById('gameMessage').innerHTML = `üì° +${plate.value} poin!`;
                    } else if (plate.y > canvas.height) {
                        plates.splice(index, 1);
                    }
                });
            }

            function resetGame() {
                gameScore = 0;
                plates = [];
                document.getElementById('scoreDisplay').innerText = '0';
                document.getElementById('gameMessage').innerText = 'Klik kiri/kanan canvas untuk geser detektor!';
                if (gameInterval) clearInterval(gameInterval);
                gameActive = true;
                gameInterval = setInterval(() => {
                    if (gameActive && plates.length < 7) {
                        spawnPlate();
                    }
                }, 600);
                requestAnimationFrame(function animate() {
                    if (!gameActive) return;
                    drawGame();
                    requestAnimationFrame(animate);
                });
            }

            // Kontrol detektor
            canvas.addEventListener('click', (e) => {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                if (mouseX < catcher.x + catcher.width / 2) {
                    catcher.x = Math.max(0, catcher.x - 40);
                } else {
                    catcher.x = Math.min(canvas.width - catcher.width, catcher.x + 40);
                }
            });

            document.getElementById('restartGame').addEventListener('click', resetGame);

            // ---------- AUDIO GEMURUH ----------
            let audioElement;
            let audioPlaying = false;
            const audioStatus = document.getElementById('audioStatus');

            function initAudio() {
                if (audioElement) return;
                audioElement = new Audio();
                audioElement.loop = true;
                audioElement.volume = 0.15;
                
                const audioSources = [
                    'https://www.soundjay.com/nature/rumble-01.mp3',
                    'https://actions.google.com/sounds/v1/alarms/medium_bell_ringing_near.ogg'  // fallback
                ];
                
                audioElement.src = audioSources[0];
                audioElement.addEventListener('error', () => {
                    audioElement.src = audioSources[1];
                    audioElement.load();
                });
                audioElement.load();
            }

            function toggleAudio() {
                if (!audioElement) {
                    initAudio();
                    setTimeout(toggleAudio, 500);
                    return;
                }
                
                if (audioPlaying) {
                    audioElement.pause();
                    document.querySelector('#audioBtn i').className = 'fas fa-volume-mute';
                    audioStatus.textContent = 'Audio gemuruh: OFF';
                } else {
                    audioElement.play()
                        .then(() => {
                            document.querySelector('#audioBtn i').className = 'fas fa-volume-up';
                            audioStatus.textContent = 'Audio gemuruh: ON';
                        })
                        .catch(err => {
                            console.log('Audio play error:', err);
                            audioStatus.textContent = 'Klik izinkan audio';
                        });
                }
                audioPlaying = !audioPlaying;
                audioStatus.classList.add('show');
                setTimeout(() => audioStatus.classList.remove('show'), 2000);
            }

            document.getElementById('audioBtn').addEventListener('click', toggleAudio);
            window.addEventListener('load', initAudio);

            // ---------- HUJAN ABU VULKANIK (efek visual) ----------
            function createRain(density = 25) {
                const container = document.createElement('div');
                container.className = 'rain-bg';
                container.style.position = 'fixed';
                container.style.top = '-10%';
                container.style.left = '0';
                container.style.width = '100%';
                container.style.height = '110%';
                container.style.pointerEvents = 'none';
                container.style.zIndex = '5';
                container.style.opacity = '0.2';
                document.body.appendChild(container);
                
                for (let i = 0; i < density; i++) {
                    let drop = document.createElement('div');
                    drop.classList.add('raindrop');
                    drop.style.background = '#8a6d4b';
                    drop.style.left = Math.random() * 100 + '%';
                    drop.style.animationDuration = 0.8 + Math.random() * 1.2 + 's';
                    drop.style.animationDelay = Math.random() * 2 + 's';
                    container.appendChild(drop);
                }
                setTimeout(() => container.remove(), 4000);
            }

            // Inisialisasi
            renderMateri('struktur');
            renderQuiz();
            resetGame();
        })();
    </script>
</body>
</html>